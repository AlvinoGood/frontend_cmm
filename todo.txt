Collection: Users (Admin)

POST {{BASE_URL}}/medical-center/v1/users
Description: Create a user with an optional role (defaults to user)
Token: admin
Authorization: Bearer {{ADMIN_TOKEN}}
Content-Type: application/json
{
  "dni": "87654321",
  "email": "alice@example.com",
  "password": "S3cur3Pass!",
  "roleName": "user"
}

GET {{BASE_URL}}/medical-center/v1/users
Description: List users with pagination
Token: admin
Authorization: Bearer {{ADMIN_TOKEN}}

GET {{BASE_URL}}/medical-center/v1/users/1
Description: Get user by id
Token: admin
Authorization: Bearer {{ADMIN_TOKEN}}

PATCH {{BASE_URL}}/medical-center/v1/users/1
Description: Update user email and/or password
Token: admin
Authorization: Bearer {{ADMIN_TOKEN}}
Content-Type: application/json
{
  "email": "alice.updated@example.com",
  "password": "N3wS3cur3Pass!"
}

PATCH {{BASE_URL}}/medical-center/v1/users/1/promote-medical
Description: Promote a userâ€™s system role (e.g., to medical)
Token: admin
Authorization: Bearer {{ADMIN_TOKEN}}
Content-Type: application/json
{
  "roleName": "medical"
}

DELETE {{BASE_URL}}/medical-center/v1/users/1
Description: Delete a user by id
Token: admin
Authorization: Bearer {{ADMIN_TOKEN}}

---
Tabble about users:

CREATE TABLE users (
  user_id            BIGSERIAL PRIMARY KEY,
  dni                VARCHAR(8) UNIQUE CHECK (dni ~ '^[0-9]{1,8}$') NOT NULL,
  email              TEXT UNIQUE NOT NULL,
  password           TEXT NOT NULL,
  p_sys_role_id      BIGINT NOT NULL REFERENCES sys_roles(sys_role_id) ON UPDATE CASCADE,
  p_medical_role_id  BIGINT REFERENCES medical_roles(medical_role_id) ON UPDATE CASCADE ON DELETE SET NULL,
  created_at         TIMESTAMPTZ NOT NULL DEFAULT now()
);

---

Example of return after to call API "GET {{BASE_URL}}/medical-center/v1/users":

{
    "success": true,
    "data": {
        "total": 2,
        "items": [
            {
                "id": 2,
                "dni": "12345678",
                "email": "levitagoodlvns@gmail.com",
                "role": {
                    "id": 1,
                    "name": "admin"
                },
                "createdAt": "2025-11-09T00:46:36.495Z"
            },
            {
                "id": 1,
                "dni": "75206743",
                "email": "lev.alvin426@gmail.com",
                "role": {
                    "id": 3,
                    "name": "user"
                },
                "createdAt": "2025-11-09T00:39:01.141Z"
            }
        ]
    },
    "timestamp": "2025-11-11T06:33:01.969Z"
}

---

Example of return after to call API "GET {{BASE_URL}}/medical-center/v1/medical-roles":

{
    "success": true,
    "data": {
        "total": 6,
        "items": [
            {
                "id": 1,
                "specialtyName": "doctor",
                "createdAt": "2025-10-18T05:20:17.272Z",
                "template": {
                    "id": 2,
                    "name": "cartilla me-ob-ps",
                    "filePath": "templates/cartilla-me-ob-ps.pdf",
                    "originalFileName": "cartilla-me-ob-ps.pdf",
                    "mimeType": "application/pdf",
                    "fileSize": null,
                    "createdAt": "2025-10-18"
                }
            },
            ...
        ]
    },
    "timestamp": "2025-11-11T04:29:12.386Z"
}
